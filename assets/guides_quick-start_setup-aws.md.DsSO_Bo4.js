import{_ as i,c as a,o as e,ag as t}from"./chunks/framework.BDwTZuFy.js";const u=JSON.parse('{"title":"Setting up Infrastructure on AWS","description":"","frontmatter":{},"headers":[],"relativePath":"guides/quick-start/setup-aws.md","filePath":"guides/quick-start/setup-aws.md","lastUpdated":1748425526000}'),n={name:"guides/quick-start/setup-aws.md"};function l(h,s,p,r,o,d){return e(),a("div",null,s[0]||(s[0]=[t(`<h1 id="setting-up-infrastructure-on-aws" tabindex="-1">Setting up Infrastructure on AWS <a class="header-anchor" href="#setting-up-infrastructure-on-aws" aria-label="Permalink to &quot;Setting up Infrastructure on AWS&quot;">​</a></h1><p>This guide explains how to set up a <strong>React Native CDN (Content Delivery Network)</strong> infrastructure on AWS using <strong>Pulumi</strong>. This process is done using the <code>@granite-js/pulumi-aws</code> package.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><p>If you&#39;re using Pulumi for the first time, you&#39;ll need to install the Pulumi CLI first. Please refer to the official guide below to install it according to your operating system.</p><ul><li><a href="https://www.pulumi.com/docs/iac/download-install/" target="_blank" rel="noreferrer">Pulumi Installation Guide</a></li></ul><h2 id="creating-a-pulumi-project" tabindex="-1">Creating a Pulumi Project <a class="header-anchor" href="#creating-a-pulumi-project" aria-label="Permalink to &quot;Creating a Pulumi Project&quot;">​</a></h2><p>To create a Pulumi project, run the following command</p><p>When you run this command, a default template will be created and you&#39;ll be prompted for some settings. After entering the project name, description, AWS region, etc., your project will be ready.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react-native-cdn</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> react-native-cdn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pulumi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aws-typescript</span></span></code></pre></div><h2 id="installing-packages" tabindex="-1">Installing Packages <a class="header-anchor" href="#installing-packages" aria-label="Permalink to &quot;Installing Packages&quot;">​</a></h2><p>To use the React Native CDN component in Pulumi, you need to install the <code>@granite-js/pulumi-aws</code> package. Run one of the following commands based on your package manager</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-frH8P" id="tab-6cxzMGj" checked><label data-title="npm" for="tab-6cxzMGj">npm</label><input type="radio" name="group-frH8P" id="tab-zftTriA"><label data-title="pnpm" for="tab-zftTriA">pnpm</label><input type="radio" name="group-frH8P" id="tab-VgW3SJR"><label data-title="yarn" for="tab-VgW3SJR">yarn</label></div><div class="blocks"><div class="language-sh vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @granite-js/pulumi-aws</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save-dev</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @granite-js/pulumi-aws</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dev</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @granite-js/pulumi-aws</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save-dev</span></span></code></pre></div></div></div><h2 id="configuring-aws-credentials" tabindex="-1">Configuring AWS Credentials <a class="header-anchor" href="#configuring-aws-credentials" aria-label="Permalink to &quot;Configuring AWS Credentials&quot;">​</a></h2><p>You need to set up credentials so that Pulumi can create AWS resources. You can do this either through environment variables or using the AWS CLI.</p><h3 id="method-1-setting-up-with-environment-variables" tabindex="-1">Method 1: Setting up with Environment Variables <a class="header-anchor" href="#method-1-setting-up-with-environment-variables" aria-label="Permalink to &quot;Method 1: Setting up with Environment Variables&quot;">​</a></h3><p>Pulumi reads AWS credentials from the environment to create resources. By setting credentials as environment variables, Pulumi can automatically read the values without requiring a separate configuration file.</p><p>Set the credentials in your terminal as follows. This method is temporary and will be lost when you close the terminal.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AWS_ACCESS_KEY_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-access-key-id&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AWS_SECRET_ACCESS_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-secret-access-key&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AWS_REGION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-region&quot;</span></span></code></pre></div><h3 id="method-2-setting-up-with-aws-cli" tabindex="-1">Method 2: Setting up with AWS CLI <a class="header-anchor" href="#method-2-setting-up-with-aws-cli" aria-label="Permalink to &quot;Method 2: Setting up with AWS CLI&quot;">​</a></h3><p>When you run this command, you can enter your credentials and default region. Setting up credentials with AWS CLI ensures they persist even after closing the terminal.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configure</span></span></code></pre></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><p>To use the <code>ReactNativeBundleCDN</code> component, import it in your Pulumi program and create an instance</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pulumi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@pulumi/pulumi&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aws </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@pulumi/aws&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ReactNativeBundleCDN } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@granite-js/pulumi-aws&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pulumi.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReactNativeBundleCDN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myReactNativeBundleCDN&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bucketName: config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bucketName&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  region: config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;region&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="setting-configuration-variables" tabindex="-1">Setting Configuration Variables <a class="header-anchor" href="#setting-configuration-variables" aria-label="Permalink to &quot;Setting Configuration Variables&quot;">​</a></h2><p>The configuration variables <code>bucketName</code> and <code>region</code> used in the example code above need to be specified in Pulumi configuration beforehand</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pulumi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bucketName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your-bucket-name</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pulumi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> region</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> us-west-2</span></span></code></pre></div><h2 id="deploying-infrastructure" tabindex="-1">Deploying Infrastructure <a class="header-anchor" href="#deploying-infrastructure" aria-label="Permalink to &quot;Deploying Infrastructure&quot;">​</a></h2><p>Once all settings are complete, deploy the infrastructure using the following command</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pulumi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">When using Yarn Plug&#39;n&#39;Play (PnP)</p><p>You need to install pnpify and run the pulumi command as follows:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @yarnpkg/pnpify</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pulumi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span></span></code></pre></div></div><p>When you run this command, Pulumi will show you what resources it will create. After reviewing the changes, enter <code>yes</code> to start the deployment. This process will create the React Native CDN infrastructure on AWS.</p><h2 id="cleaning-up-resources" tabindex="-1">Cleaning up Resources <a class="header-anchor" href="#cleaning-up-resources" aria-label="Permalink to &quot;Cleaning up Resources&quot;">​</a></h2><p>To delete the deployed resources when they are no longer needed, run the following command</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pulumi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> destroy</span></span></code></pre></div><p>Pulumi will show you what resources it will delete and ask for confirmation. Enter <code>yes</code> to delete all resources.</p>`,36)]))}const c=i(n,[["render",l]]);export{u as __pageData,c as default};
